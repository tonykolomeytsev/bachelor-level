\chapter{\MakeUppercase{Механическая конструкция}}
\section{Проектирование ног}
Основная, и самая сложная с точки зрения механики часть шагающего робота, это конечности. Как и корпус, ноги проектировались в виде трёхмерных, твердотельных чертежей. Для уменьшения количества уникальных деталей конструкция всех четырех ног была унифицирована. Таким образом снижена сложность и затратность в производстве деталей. 

Сложные по форме детали изготовлены из пластика на 3D-принтере, в конструкции также присутствуют металлические стержни, стандартные металлические кронштейны, крепежные элементы (винты, гайки).

Перед проектированием были выдвинуты функциональные требования к конечностям. Они должны быть как можно менее габаритными, для сохранности редукторов сервоприводов и для увеличения скорости движения нужно максимально уменьшить момент инерции конечности. Основной способ достижения этой цели -- уменьшение веса всех деталей. Поэтому крепежные и элементы корпуса, были изготовлены из пластика, там где это было возможно. Были использованы полые цилиндрические аллюминиевые трубки в качестве стержней, обеспечивающих жесткость.

Есть еще один, не менее эффективный способ снизить момент инерции ног, не уменьшая общего веса конечностей -- концентрация основной массы как можно выше, ближе к месту крепления ноги к корпусу. Поэтому сервоприводы, как одни из самых тяжелых элементов конструкции, были перенесены максимально близко к корпусу и максимально далеко от пола.

В связи с этим в конструкции возник механический четырехзвенник, позволяющий для вращения последнего звена ноги установить сервопривод не непосредственно в шарнир, а передать вращение двигателя издалека. Четырехзвенник усложнил кинематическую схему ноги, его расчет рассмотрен далее, однако такая конструкция не только хорошо повлияла на механические характеристики ноги, но и на эстетические тоже. Крутящий момент передается при помощи кинематического четырехзвенника и двигатель, который имеет неоптимальные габариты, не пришлось размещать в последнем узле ноги, что позволило сделать конечность максимально компактной.

В конструкции предусмотрена установка датчиков касания на стопы, в ходе развития проекта. Стопы можно будет заменить на более совершенные, а конструкция ноги позволит без проблем проложить провода внутри стержней, либо сокрытыми за стенками корпуса.

Из-за специфики сервоприводов возникают проблемы во время сборки, которые замедляют процесс сборки и требуют наличия управляющей электроники. Дело в том что при установке в конструкцию ноги, сервопривод должен быть верно сконфигурирован, или проще говоря, быть заранее повернутым на известный далее управляющей программе угол поворота. Так называемый технический угол. Этим минусом обладают все сервоприводы такого типа. В других видах приводов конфигурировать углы поворота при сборке не нужно, но каждый раз при запуске нужно калибровать приводы, поворачивая их в нулевое, начальное положение. Такие приводы не были использованы в силу своей дороговизны и в силу того что наличие концевых выключателей в конструкции конечности сильно бы усложнило разработку. Для прототипа это излишне.

\section{Проектирование корпуса}
Требования к корпусу можно разделить на три составляющие: массовые, габаритные и эстетические. Снижать массу нужно для того чтобы разгрузить конечности робота, защитить редукторы электроприводов. Снижению массы способствует максимальный отказ от металлических деталей, а там где это невозможно (в силу требований по жесткости), нужно использовать эффективные сечения профилей, желательно из аллюминия.

В качестве каркаса, к которому крепятся ноги робота был выбран конструкционный аллюминиевый профиль, из-за его легкости, жесткости и простоты крепления новых деталей к профилю.

Объем корпусу придают тонкие цилиндрические аллюминиевые стержни, в узлах пластиковые крепежи. Такая конструкция позволяет использовать максимально много места внутри корпуса, что упрощает размещение электронных компонентов внутри. 

Самой сложной задачей была компоновка всех компонентов внутри корпуса, так как нужно сохранить их "доступность" в любой момент времени для замены или диагностики. Таким образом повышается общая ремонтопригодность прототипа, а это сильно ускоряет работу с ним.

\section{Подбор комплектующих}
\subsection{Статические детали}

\subsection{Силовая электроника}
Из силовой электроники в роботе присутствуют:
\begin{itemize}
    \item Электрические сервоприводы
    \item \textit{DC-DC} преобразователи напряжения.
\end{itemize}

\subsection{Логическая электроника}
В качестве управляющего микрокомпьютера выступает \textit{Raspberry Pi 3B+}. Этого достаточно для совершения множества матричных операций в секунду и для эффективной работы с высокоуровневыми абстракциями в коде.

\textit{Raspberry Pi} выступает исключительно как своеобразный модуль для высокоуровневых вычислений и не работает с "железом" напрямую. Вместо этого происходит отправка команд на микроконтроллер в составе платформы \textit{Arduino}. Команды формируются и передаются в цифровом виде на микроконтроллер. Сделано это по двум причинам:
\begin{itemize}
    \item Отделение логики вычислений состояния робота от самого процесса управления.
    \item Электрическая защита дорогостоящего микрокомпьютера от возможных скачков тока в цепи силовой электроники.
\end{itemize}

О протоколе передачи данных и способе формирования команд подробнее написано далее. \fixme